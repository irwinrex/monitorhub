ingester:
  trace_idle_period: 10s
  lifecycler:
    live_traces_period: 5m # was trace_live_period
  max_block_duration: 30m # add if needed
  wal:
    path: /data/tempo/wal
    encoding: snappy # was v2_encoding

compactor:
  compaction:
    block_retention: 2160h
    compacted_block_retention: 1h
    retention_concurrency: 10
    # cleanup_interval removed

storage:
  trace:
    backend: s3
    s3:
      bucket: ${S3_BUCKET_NAME}
      endpoint: s3.${AWS_REGION}.amazonaws.com
      region: ${AWS_REGION}
      prefix: tempo/
      insecure: false
      force_path_style: false # was s3forcepathstyle
    wal:
      path: /data/tempo/wal
      encoding: snappy

query_frontend:
  log_queries_longer_than: 5s
